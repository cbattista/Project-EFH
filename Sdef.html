<html>
<head>
<link href = "Sdef.css" rel="stylesheet" type = "text/css"> </link>

<script type = "text/javascript" src = "Jquery.js"> </script>
<script type = "text/javascript" src = "timer.js"></script>
<script type = "text/javascript">

var timeInc = 5;
$(document).ready(function(){
	
	//setting of game variables - eventually should be retrieved from the database
	trial = 0;
	stimList = [0, 0, 0, 1, 1, 0, 1, 1, 1, 0, 0, 0];
	stimFile = ["bombBox.png", "aidBox.png"];
	subject = new Subject();
	currentTime = new Date();
	trialStart = currentTime.getTime();

	//start things off
	stim = stimList[trial];
	
	$.timer(40,function(timer){
		
		var position = $("#mysteryBox").position()
		position.top = position.top + timeInc;
		var positionString = position.top + "px";
		$("#mysteryBox").css("top", positionString);

		if (position.top > 565){
			position.top = 0;
			hitGround();
			timer.reset(40);}
	});

	
	
	function hitGround() {
		//package hits ground, determine whether it's a good or bad outcome, logs event
		trial = trial + 1;
		if (stim == 0) {
			Subject.inputData(trial, "outcome", "TN");
		}
		else {
			Subject.inputData(trial, "outcome", "N");
		}
		Subject.inputData(trial, "RT", 0);
		
	}

	function detonate() {
		//user destroys package
		RT = currentTime.getTime() - trialStart;
		trial = trial + 1;
		Subject.inputData(trial, "RT", RT);
		if (stim == 0) {
			Subject.inputData(trial, "outcome", "P");
		}
		else {
			Subject.inputData(trial, "outcome", "FP");
		}
		
	}
	
});

</script>

</head>

<body>
<h1> Satellite Defender </h1>

<div id = "playground">
	<div id = "mysteryBox"> <img src = "images/SatDef/mysteryBox.png" /></div>
	
	<div id = "binoculars" ><img src = "images/SatDef/binocular.png" /></div>
	
	<div id = "city" ><img src = "images/SatDef/city.png" /></div>

</div>

</body>
</html>